<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">

<!-- http://java.sun.com/jsf/core	http://xmlns.jcp.org/jsf/core
		http://java.sun.com/jsf/html	http://xmlns.jcp.org/jsf/html
		http://java.sun.com/jsf/facelets	http://xmlns.jcp.org/jsf/facelets
		http://java.sun.com/jsf/composite	http://xmlns.jcp.org/jsf/composite
		http://java.sun.com/jsp/jstl/core	http://xmlns.jcp.org/jsp/jstl/core
		http://java.sun.com/jsp/jstl/functions	http://xmlns.jcp.org/jsp/jstl/functions -->

<h:head>
	<title>Webapp!</title>
	<h:outputStylesheet library="css" name="bootstrap.css" />
	<h:outputScript library="js" name="msj.js" />
	<h:outputStylesheet library="css" name="styles.css" />
</h:head>

<h:body>

	<h2>Welcome</h2>

	<h2>Usuarios</h2>

	<h:form>
	Filtrar: 
		<h:inputText id="nameInput" value="#{usuarioBean.name}" />
		<h:commandButton id="submit2" value="Submit"
			action="#{usuarioBean.getByName()}">
		</h:commandButton>
		<h:commandButton id="showAll" value="Show All"
			action="#{usuarioBean.getAll()}">
		</h:commandButton>

		<br />

		<h:dataTable value="#{usuarioBean.getAllUsers()}" var="usuario" border="2"
			styleClass="employeeTable" headerClass="employeeTableHeader"
			rowClasses="employeeTableOddRow,employeeTableEvenRow">
			<h:column>
				<f:facet name="header">ID Usuario</f:facet>
				<h:outputText value="#{usuario.id}" />
			</h:column>
			<h:column>
				<f:facet name="header">Nombre</f:facet>
				<h:inputText value="#{usuario.nombre}" size="10"
					rendered="#{usuario.canEdit}" />
				<h:outputText value="#{usuario.nombre}"
					rendered="#{not usuario.canEdit}" />
			</h:column>

			<h:column>
				<f:facet name="header">Edit</f:facet>
				<h:commandButton value="Edit"
					action="#{usuarioBean.editUsuario(usuario)}"
					rendered="#{not usuario.canEdit}">
					<f:setPropertyActionListener target="#{usuarioBean.usuario}"
						value="#{usuario}" />
				</h:commandButton>
				<h:commandButton value="Cancel"
					action="#{usuarioBean.notEditUsuario(usuario)}"
					rendered="#{usuario.canEdit}">
				</h:commandButton>
			</h:column>

			<h:column>
				<f:facet name="header">Delete</f:facet>
				<h:commandButton value="Delete" action="#{usuarioBean.deleteUsuario()}" >
				<f:setPropertyActionListener target="#{usuarioBean.usuario}"
					value="#{usuario}" />
				</h:commandButton>
			</h:column>

		</h:dataTable>

		<h:commandButton value="Save Usuarios"
			action="#{usuarioBean.saveUsuarios}" />

	</h:form>

	<h3>Insert New</h3>

	<h:form onsubmit="showMessage();">
		Nombre:<h:inputText id="nameInput" value="#{usuarioBean.name}" />
		<h:commandButton id="submit" value="Guardar!!"
			action="#{usuarioBean.create()}">
		</h:commandButton>
	</h:form>

	<h:form>
	<h:commandButton action = "home.xhtml" value = "Return to Home" />
	</h:form>
	
</h:body>
</html>